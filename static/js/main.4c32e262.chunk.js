(this["webpackJsonpreact-dev-demo"]=this["webpackJsonpreact-dev-demo"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(21),l=a.n(i),c=(a(70),a(6)),r=a(10),s=(a(71),a(11)),m=a(123),u=a(122),d=a(57),h=a(25),f=a(129),g=a(54),p=a(121);f.a.registerLanguage("jsx",g.a);var E=function(e){var t=e.className,a=e.codeString;return o.a.createElement("div",{className:t},o.a.createElement(f.a,{language:"javascript",style:p.a,showLineNumbers:!0},a))},v=a(127),y=a(124),b=a(58),k={envId:"bn1ab7m56qolupi5sa0g",sdkConfig:{fetchNow:!0,enableConsoleLogs:!0,enableErrorLayout:!0,nodeEnv:"production"},visitorData:{id:"test-vid",context:{isAuth:!0,isVip:!1}},sandbox:{envId:["bn1ab7m56qolupi5sa0g","bn1ab7m56qolupi5sa0g_1","bn1ab7m56qolupi5sa0g_2"],nodeEnv:["production","development"],visitorId:["test-vid","test-vid_2","test-vid_3"]}},C=function(){var e="initialization",t=Object(c.a)({},k.visitorData.context),a=Object(n.useContext)(L),i=a.currentSettings,l=a.setSettings,s=o.a.useState(Object(c.a)({},i)),m=Object(r.a)(s,2),f=m[0],g=m[1],p=function(e){var t=JSON.parse(e.currentTarget.parentElement.innerText),a=Object(c.a)({},f);if(e.currentTarget.checked)g(Object(c.a)({},f,{visitorData:Object(c.a)({},f.visitorData,{context:Object(c.a)({},f.visitorData.context,{},t)})}));else{var n=Object.keys(t)[0];g(Object(c.a)({},f,{visitorData:Object(c.a)({},f.visitorData,{context:Object.entries(a.visitorData.context).reduce((function(e,t){var a=Object(r.a)(t,2),o=a[0],i=a[1];return o===n?e:Object(c.a)({},e,Object(h.a)({},o,i))}),{})})}))}};return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:e}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,e),o.a.createElement("p",null,"The ",o.a.createElement("b",null,e)," is proceed with"," ",o.a.createElement("b",null,"FlagshipProvider"),". In this demo app, it is plugged like so:"),o.a.createElement(E,{className:"mv3",codeString:"import React from 'react';\nimport { FlagshipProvider } from \"@flagship.io/react-sdk\";\n\nconst App: React.FC = () => (\n  <>\n      <FlagshipProvider\n      envId={".concat(i.envId,"}\n      config={\n        ").concat(JSON.stringify(i.sdkConfig,null,2),"\n      }\n      visitorData={\n        ").concat(JSON.stringify(i.visitorData,null,2),'\n    }\n      onInitStart={() => {\n        console.log("init start");\n      }}\n      onInitDone={() => {\n        console.log("init done");\n      }}\n      onUpdate={({ fsModifications }) => {\n        console.log(\n            \'React SDK updated with modifications:\' + JSON.stringify(fsModifications)\n        );\n      }}\n      loadingComponent={\n        <Container className="mt3">\n          <Row>\n            <Col xs={12}>Loading Flagship React SDK...</Col>\n          </Row>\n        </Container>\n      }\n    >\n      <Header />\n      <AppContainer />\n    </FlagshipProvider>\n  </>\n);          ')}),o.a.createElement("p",null,"To understand impact of each props, you can change some value dynamically here:"," "),o.a.createElement("h3",{style:{borderBottom:"1px solid grey",marginBottom:"16px",paddingBottom:"8px"}},"1 - Playing with ",o.a.createElement("i",null,"config")),o.a.createElement(y.a,null,o.a.createElement(y.a.Group,{controlId:"initForm.Control1.1",style:{display:"flex",alignItems:"center",marginLeft:"16px"}},o.a.createElement("div",null,"envId: "),o.a.createElement(y.a.Control,{as:"select",onChange:function(e){return g(Object(c.a)({},f,{envId:e.target.value}))}},k.sandbox.envId.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(y.a.Group,{controlId:"initForm.Control1.11",style:{display:"flex",alignItems:"center",marginLeft:"16px"}},o.a.createElement("div",null,"nodeEnv: "),o.a.createElement(y.a.Control,{as:"select",onChange:function(e){return g(Object(c.a)({},f,{sdkConfig:Object(c.a)({},f.sdkConfig,{nodeEnv:e.target.value})}))}},k.sandbox.nodeEnv.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(y.a.Group,{controlId:"initForm.Control1.2"},o.a.createElement(y.a.Check,{type:"checkbox",checked:f.sdkConfig.fetchNow,onChange:function(e){return g(Object(c.a)({},f,{sdkConfig:Object(c.a)({},f.sdkConfig,{fetchNow:e.currentTarget.checked})}))},label:"fetchNow=".concat(f.sdkConfig.fetchNow)})),o.a.createElement(y.a.Group,{controlId:"initForm.Control1.3"},o.a.createElement(y.a.Check,{type:"checkbox",checked:f.sdkConfig.enableConsoleLogs,onChange:function(e){return g(Object(c.a)({},f,{sdkConfig:Object(c.a)({},f.sdkConfig,{enableConsoleLogs:e.currentTarget.checked})}))},label:"enableConsoleLogs=".concat(f.sdkConfig.enableConsoleLogs)})),o.a.createElement(y.a.Group,{controlId:"initForm.Control1.4"},o.a.createElement(y.a.Check,{type:"checkbox",checked:f.sdkConfig.enableErrorLayout,onChange:function(e){return g(Object(c.a)({},f,{sdkConfig:Object(c.a)({},f.sdkConfig,{enableErrorLayout:e.currentTarget.checked})}))},label:"enableErrorLayout=".concat(f.sdkConfig.enableErrorLayout)}))),o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(b.a,{variant:"secondary",onClick:function(){return l(Object(c.a)({},f))}},"Apply change")),o.a.createElement("h3",null,"2 - Playing with ",o.a.createElement("i",null,"visitorData")),o.a.createElement(y.a,null,o.a.createElement(y.a.Group,{controlId:"initForm.ControlSelect2"},o.a.createElement(y.a.Label,null,"visitorId"),o.a.createElement(y.a.Control,{as:"select",onChange:function(e){return g(Object(c.a)({},f,{visitorData:Object(c.a)({},f.visitorData,{id:e.target.value})}))}},k.sandbox.visitorId.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(y.a.Group,{controlId:"initForm.ControlSelect3"},o.a.createElement(y.a.Label,null,"visitor context"),Object.entries(t).map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return o.a.createElement(y.a.Check,{key:a,type:"checkbox",id:"default-".concat(a),checked:f.visitorData.context.hasOwnProperty(a),onChange:p,label:JSON.stringify(Object(h.a)({},a,n))})})))),o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(b.a,{variant:"secondary",onClick:function(){return l(Object(c.a)({},f))}},"Apply change")),o.a.createElement("div",null,"Since we have set those settings:"),o.a.createElement(E,{className:"mv3",codeString:"".concat(JSON.stringify(i.sdkConfig,null,2))}),o.a.createElement("div",null,"When you change those values, you can notice the behavior of the SDK, on logs & network."),o.a.createElement("div",null,"It will impact the output of Flagship SDK Hooks as well, take a look below."))))},F=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1];Object(s.useFsActivate)(["btnColor","otherKey1","otherKey2"],[a]);return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsActivate"}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,"useFsActivate"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsActivate")," hook to trigger activation of a modification when needed:"),o.a.createElement(E,{className:"mv3",codeString:"const [toggle, setToggle] = React.useState(false);\nuseFsActivate(['btnColor', 'otherKey1', 'otherKey2'], [toggle]);\n\n// {...}\n\n<Button\nvariant=\"secondary\"\nonClick={() => setToggle(!toggle)}\n>\n    Trigger activate\n</Button>"}),o.a.createElement(b.a,{variant:"secondary",onClick:function(){return n(!a)}},"Trigger activate"),o.a.createElement("div",{className:"mv3"},o.a.createElement("p",null,"In this example, we're activating only when"," ",o.a.createElement("i",null,"toggle")," value has changed as we have specified a 2nd argument in ",o.a.createElement("i",null,"useFsActivate")," hook."),o.a.createElement("p",null,"We also specified in 1st argument that we want to activate 3 keys. For each key, there is 2 possible scenarios:"),o.a.createElement("p",null,'If the key exist, a http request "activate" will be done.'),o.a.createElement("p",null,"If the key does not exist, you will receive a warning log.")))))},S=function(){var e=Object(s.useFsModifications)([{key:"btnColor",defaultValue:"green",activate:!1}]);return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsModifications"}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,"useFsModifications"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsModifications")," hook to get the modifications:"),o.a.createElement(E,{className:"mv3",codeString:"import { useFsModifications } from '@flagship.io/react-sdk';\nconst fsModifications = useFsModifications([\n  {\n      key: 'btnColor',\n      defaultValue: 'green',\n      activate: false\n  }\n]);              "}),o.a.createElement("p",null,"Output: "),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"secondary",style:{backgroundColor:e.btnColor}},"I'm a button customized with Flagship (backgroundColor=".concat(e.btnColor,")"))),o.a.createElement(E,{className:"mv3",codeString:'<Button\n    variant="secondary"\n    style={{\n        backgroundColor: fsModifications.btnColor\n    }}\n>\n    {`I\'m a button customized with Flagship (backgroundColor=${fsModifications.btnColor})`}\n</Button>'}))))},w=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],i=o.a.useState(!1),l=Object(r.a)(i,2),c=l[0],m=l[1];Object(s.useFsSynchronize)([a],c);return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsSynchronize"}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,"useFsSynchronize"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsSynchronize")," hook to trigger activation of a modification:"),o.a.createElement(E,{className:"mv3",codeString:"useFsActivate([listenedValue], activateAllModifications);"}),o.a.createElement(y.a,null,o.a.createElement(y.a.Group,{controlId:"demoFsSynchronize.ControlSelect1"},o.a.createElement(y.a.Label,null,"Playing with 1st argument"),o.a.createElement(y.a.Check,{type:"checkbox",checked:a,onChange:function(e){return n(e.currentTarget.checked)},label:"listenedValue=".concat(a)})),o.a.createElement(y.a.Group,{controlId:"demoFsSynchronize.ControlSelect2"},o.a.createElement(y.a.Label,null,"Playing with 2nd argument"),o.a.createElement(y.a.Check,{type:"checkbox",checked:c,onChange:function(e){return m(e.currentTarget.checked)},label:"activateAllModifications=".concat(c)}))),o.a.createElement("div",null,"When ",o.a.createElement("b",null,"listenedValue")," value changed, it will trigger a synchronize as it is set in the first argument of"," ",o.a.createElement("b",null,"useFsActivate"),"."),o.a.createElement("div",null,"You can also notice that enabling"," ",o.a.createElement("b",null,"activateAllModifications")," to true will modify the payload sent to the Flagship API and thus trigger an activate."))))},O=function(){var e=Object(s.useFlagship)({modifications:{requested:[{key:"btnColor",defaultValue:"green",activate:!1}]}}).modifications,t=Object(s.useFlagship)(),a=t.status,n=t.hit;return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFlagship"}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,"useFlagship"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFlagship")," hook to get access to further stuff such as ",o.a.createElement("i",null,"modifications"),", ",o.a.createElement("i",null,"sdk status"),","," ",o.a.createElement("i",null,"hits")," :"),o.a.createElement(E,{className:"mv3",codeString:"import { useFlagship } from '@flagship.io/react-sdk';\nconst fsParams = {\n    modifications: {\n        requested: [\n            {\n                key: 'btnColor',\n                defaultValue: 'green',\n                activate: false\n            }\n        ]\n    }\n}\nconst {\n    modifications: fsModifications,\n    status: fsStatus,\n    hit: fsHit,\n} = useFlagship(fsParams);"}),o.a.createElement("h3",null,"1 - Playing with ",o.a.createElement("i",null,"fsModifications")),o.a.createElement("p",null,"demo: "),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"secondary",style:{backgroundColor:e.btnColor}},"I'm a button customized with Flagship (backgroundColor=".concat(e.btnColor,")"))),o.a.createElement(E,{className:"mv3",codeString:'<Button\n    variant="secondary"\n    style={{\n        backgroundColor: fsModifications.btnColor\n    }}\n>\n    {`I\'m a button customized with Flagship (backgroundColor=${fsModifications.btnColor})`}\n</Button>'}),o.a.createElement("h3",null,"2 - Playing with ",o.a.createElement("i",null,"fsStatus")),o.a.createElement("div",{style:{marginBottom:16}},"If you're not familiar with the payload that you should a provide to the hit you want to send, you'll have all details available in the"," ",o.a.createElement("a",{href:"https://github.com/abtasty/flagship-js-sdk/blob/master/README.md#shape-of-possible-hits-to-send-1"},"SDK JS Hit documentation"),"."),o.a.createElement("p",null,"demo with Transaction Hit: "),o.a.createElement(E,{className:"mv3",codeString:"\nfsStatus=".concat(JSON.stringify(a,null,2),";\n                        ")}),o.a.createElement("div",{className:"fsAnchor",id:"sendHits"}),o.a.createElement("h3",null,"3 - Playing with ",o.a.createElement("i",null,"hits")),o.a.createElement("div",null,o.a.createElement("b",null,"NOTE:"),o.a.createElement("p",null,"It is not necessary to provide parameters to"," ",o.a.createElement("i",null,"useFlagship")," if your purpose is only to send hits."),o.a.createElement(E,{className:"mv3",codeString:"import { useFlagship } from '@flagship.io/react-sdk';\nconst { hit: fsHit } = useFlagship();"})),o.a.createElement("p",null,"demo: "),o.a.createElement(E,{className:"mv3",codeString:"<Button\n    onClick={() => {\n        const mockHit = {\n            type: 'Transaction',\n            data: {\n                transactionId: '12451342423',\n                affiliation: 'myAffiliation',\n                totalRevenue: 999,\n                shippingCost: 888,\n                shippingMethod: 'myShippingMethod',\n                currency: 'myCurrency',\n                taxes: 1234444,\n                paymentMethod: 'myPaymentMethod',\n                itemCount: 2,\n                couponCode: 'myCOUPON',\n                documentLocation:\n                    'http%3A%2F%2Fabtastylab.com%2F60511af14f5e48764b83d36ddb8ece5a%2F',\n                pageTitle: 'myScreen'\n            }\n        };\n        fsHit.send(mockHit);\n    }}\n>\n    Send a transaction hit\n</Button>"}),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"secondary",onClick:function(){n.send({type:"Transaction",data:{transactionId:"12451342423",affiliation:"myAffiliation",totalRevenue:999,shippingCost:888,shippingMethod:"myShippingMethod",currency:"myCurrency",taxes:1234444,paymentMethod:"myPaymentMethod",itemCount:2,couponCode:"myCOUPON",documentLocation:"http%3A%2F%2Fabtastylab.com%2F60511af14f5e48764b83d36ddb8ece5a%2F",pageTitle:"myScreen"}})}},"Send a transaction hit")),o.a.createElement(E,{className:"mv3",codeString:"<Button\n    onClick={() => {\n        const mockHit1 = {\n            type: 'Transaction',\n            data: {\n                transactionId: '12451342423',\n                affiliation: 'myAffiliation',\n                totalRevenue: 999,\n                shippingCost: 888,\n                shippingMethod: 'myShippingMethod',\n                currency: 'myCurrency',\n                taxes: 1234444,\n                paymentMethod: 'myPaymentMethod',\n                itemCount: 2,\n                couponCode: 'myCOUPON',\n                documentLocation:\n                    'http%3A%2F%2Fabtastylab.com%2F60511af14f5e48764b83d36ddb8ece5a%2F',\n                pageTitle: 'myScreen'\n            }\n        };\n        const mockHit2 = { ...mockHit1 };\n        mockHit2.data.transactionId = '999';\n        fsHit.sendMultiple([mockHit1, mockHit2]);\n    }}\n>\n    Send multiple transaction hits\n</Button>"}),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"secondary",onClick:function(){var e={type:"Transaction",data:{transactionId:"12451342423",affiliation:"myAffiliation",totalRevenue:999,shippingCost:888,shippingMethod:"myShippingMethod",currency:"myCurrency",taxes:1234444,paymentMethod:"myPaymentMethod",itemCount:2,couponCode:"myCOUPON",documentLocation:"http%3A%2F%2Fabtastylab.com%2F60511af14f5e48764b83d36ddb8ece5a%2F",pageTitle:"myScreen"}},t=Object(c.a)({},e);t.data.transactionId="999",n.sendMultiple([e,t])}},"Send multiple transaction hits")))))},I=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1];return o.a.useEffect((function(){if(a)throw new Error("Flagship - Creating an error just for test...");n(!1)}),[a]),o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement("div",{className:"fsAnchor",id:"safeMode"}),o.a.createElement(v.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(v.a.Heading,null,"Safe Mode"),o.a.createElement("p",null,"When an error occurs unexpectedly, the React SDK switch automatically into ",o.a.createElement("b",null,"Safe Mode"),". Thus, default value of modifications will always be returned. Moreover, other features will just log an error without crash. In a node environment other than"," ",o.a.createElement("i",null,"production"),", you can enable",o.a.createElement("i",null,"enableErrorLayout")," attribute, in the SDK settings"," ",o.a.createElement("a",{href:"#initialization"},"(Check above)"),"."),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"secondary",onClick:function(){n(!0)}},"Throw an error")))))},N=function(){return o.a.createElement(m.a,{className:"mt3"},o.a.createElement(C,null),o.a.createElement(O,null),o.a.createElement(S,null),o.a.createElement(F,null),o.a.createElement(w,null),o.a.createElement(I,null))},j=a(126),x=a(128),M=a(125),A=a(59),D=a.n(A),H=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{className:"fsNavbar",fixed:"top"},o.a.createElement(j.a.Brand,{href:"https://github.com/abtasty/flagship-react-sdk",className:"flex item-center"},o.a.createElement("img",{alt:"Logo Flagship",src:D.a,className:"d-inline-block align-top logoAdjust"}),"React SDK (Dev demo)"),o.a.createElement(x.a,{className:"mr-auto fsNav"},o.a.createElement(x.a.Link,{href:"#initialization"},"Initialization"),o.a.createElement(M.a,{title:"Hooks",id:"nav-dropdown"},o.a.createElement(M.a.Item,{eventKey:"4.0",href:"#useFlagship"},"useFlagship"),o.a.createElement(M.a.Item,{eventKey:"4.1",href:"#useFsModifications"},"useFsModifications"),o.a.createElement(M.a.Item,{eventKey:"4.2",href:"#useFsActivate"},"useFsActivate"),o.a.createElement(M.a.Item,{eventKey:"4.3",href:"#useFsSynchronize"},"useFsSynchronize")),o.a.createElement(M.a,{title:"Features",id:"nav-dropdown"},o.a.createElement(M.a.Item,{eventKey:"4.0",href:"#useFlagship"},"Get modification(s)"),o.a.createElement(M.a.Item,{eventKey:"4.1",href:"#useFsActivate"},"Activate modification(s)"),o.a.createElement(M.a.Item,{eventKey:"4.2",href:"#sendHits"},"Send Hit(s)"),o.a.createElement(M.a.Item,{eventKey:"4.3",href:"#useFsSynchronize"},"Refresh modifications"),o.a.createElement(M.a.Item,{eventKey:"4.4",href:"#safeMode"},"Safe Mode"))),o.a.createElement(y.a,{inline:!0},o.a.createElement(x.a.Link,{href:"https://github.com/abtasty/flagship-react-sdk"},"Github"),o.a.createElement(x.a.Link,{href:"https://www.abtasty.com/solutions-product-teams/"},"What is Flagship ?"))))},L=Object(n.createContext)(null),T=function(){var e=o.a.useState({envId:k.envId,sdkConfig:Object(c.a)({},k.sdkConfig),visitorData:Object(c.a)({},k.visitorData)}),t=Object(r.a)(e,2),a=t[0],n=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(L.Provider,{value:{currentSettings:a,setSettings:n}},o.a.createElement(s.FlagshipProvider,{envId:a.envId,config:a.sdkConfig,visitorData:a.visitorData,onInitStart:function(){console.log("React SDK init start")},onInitDone:function(){console.log("React SDK init done")},onUpdate:function(e){var t=e.fsModifications;console.log("React SDK updated with modifications:\n"+JSON.stringify(t))},loadingComponent:o.a.createElement(m.a,{className:"mt3"},o.a.createElement(u.a,null,o.a.createElement(d.a,{xs:12,style:{color:"white",height:"100vh",fontSize:"5vw"}},"Loading Flagship React SDK...")))},o.a.createElement(H,null),o.a.createElement(N,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(113);l.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){e.exports=a.p+"static/media/Flagship-horizontal-product-white.6e8b90f3.png"},65:function(e,t,a){e.exports=a(114)},70:function(e,t,a){},71:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.4c32e262.chunk.js.map